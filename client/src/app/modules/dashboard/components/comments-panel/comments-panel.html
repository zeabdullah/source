<div class="flex h-full flex-col">
    <div class="-me-4 flex-1 overflow-y-auto pe-4 pb-4" [class.space-y-4]="comments().length > 0">
        @if (isLoading()) {
        <div class="flex justify-center py-8">
            <p-progressSpinner size="small" />
        </div>
        } @else if (comments().length === 0) {
        <app-empty-state
            icon="pi pi-comments"
            title="No comments yet"
            subtitle="Be the first to share your thoughts on this item."
        />
        } @else { @for (comment of comments(); track comment.id) {
        <app-comment [comment]="comment" />
        } }
    </div>
    <div class="flex gap-2 border-t border-gray-100 pt-3">
        <input
            pInputText
            [(ngModel)]="newComment"
            (keydown.enter)="sendComment()"
            placeholder="Add a comment..."
            class="flex-1"
        />
        <p-button
            (onClick)="sendComment()"
            [disabled]="!newComment().trim()"
            icon="pi pi-send"
            size="large"
            styleClass="rounded-xl"
        />
    </div>
</div>
