<div class="flex h-full min-h-screen flex-col">
    <!-- top nav -->
    <header class="sticky top-0 z-10 border-b border-b-gray-200 bg-gray-100">
        <p-toolbar
            class="mx-auto w-full max-w-[1600px] rounded-none border-none bg-transparent px-4 py-4 lg:px-8"
        >
            <ng-template #start>
                <img src="/source-logo-brand.svg" alt="Source Logo" class="h-12" alt="Source" />
            </ng-template>

            <ng-template #end>
                <button class="flex items-center gap-2" (click)="popover.toggle($event)">
                    <p-avatar
                        [label]="user()?.avatar_url ? undefined : 'A'"
                        [image]="user()?.avatar_url || undefined"
                        shape="circle"
                        class="bg-gray-700 text-gray-100"
                    />
                    <p class="text-button">{{ user()?.name }}</p>
                    <i class="pi pi-chevron-down"></i>
                </button>
                <p-popover #popover>
                    <div class="flex w-52 flex-col gap-1 text-sm">
                        <a
                            class="inline-flex items-center gap-2 rounded-lg px-3 py-1.5 text-gray-700 transition-colors hover:bg-gray-100"
                            routerLink="/dashboard/account"
                            (click)="popover.hide()"
                        >
                            <i class="pi pi-user"></i>
                            Account Settings
                        </a>
                        <a
                            class="inline-flex items-center gap-2 rounded-lg px-3 py-1.5 text-gray-700 transition-colors hover:bg-gray-100"
                            routerLink="/dashboard/projects"
                            (click)="popover.hide()"
                        >
                            <i class="pi pi-arrow-left"></i>
                            Back to projects
                        </a>
                        <button
                            class="inline-flex items-center gap-2 rounded-lg px-3 py-1.5 text-danger-700 transition-colors hover:bg-gray-100"
                            (click)="logoutAndGoHome()"
                        >
                            <i class="pi pi-sign-out"></i>
                            Log out
                        </button>
                    </div>
                </p-popover>
            </ng-template>
        </p-toolbar>
    </header>

    <router-outlet />
</div>
